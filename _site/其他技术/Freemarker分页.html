<!DOCTYPE html>
<html lang="en-us">
  <head>
  <meta charset="UTF-8">
  <title>前端技术</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#157878">
  <link rel="stylesheet" href="/Front-end-learning/css/normalize.css">
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="/Front-end-learning/css/cayman.css">
  <link rel="stylesheet" href="/Front-end-learning/css/font-awesome.min.css">
  <link rel="stylesheet" href="/Front-end-learning/css/highlight.css">
</head>

  <body>
    <section class="page-header">
    <h1 class="project-name"><a href="/Front-end-learning/README">前端技术</a></h1>
    <h2 class="project-tagline">逸飞的前端打怪日常，主要是javascript</h2>
    <a href="https://github.com/panyifei/Front-end-learning" class="btn">View on GitHub</a>
    <a href="https://github.com/panyifei/Front-end-learning/archive/master.zip" class="btn">Download .zip</a>
</section>

    <section class="main-content">
      <h3>Freemarker分页</h3>

<p>公司后台用的java，模板使用的是freemarker，一般分页都是写在后台的，这样打开了页面不用加载js就可以跳去想要的页面了，这里学习一下freemarker里面分页的写法</p>
<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="err">&lt;</span>#-- 传入当前的页面和总共的页数 --&gt;
<span class="err">&lt;</span>#macro pageNavigationOrg pageIndex pageCount&gt;
    <span class="err">&lt;</span>#assign curPage = pageIndex&gt;
    <span class="err">&lt;</span>#assign pageCount = pageCount&gt;
<span class="err">&lt;</span>#--
    开始页 : 求最大值(当前页和2的差值 , 1)
--&gt;
    <span class="err">&lt;</span>#if ((curPage - 2) &gt; 1)&gt;
        <span class="err">&lt;</span>#assign startPage = (curPage - 2)&gt;
    <span class="err">&lt;</span>#else&gt;
        <span class="err">&lt;</span>#assign startPage = 1&gt;
    <span class="err">&lt;</span>/#if&gt;
<span class="err">&lt;</span>#--
    结束页 : 求最小值(开始页+4, 总页数)
--&gt;
    <span class="err">&lt;</span>#if ((startPage + 4) <span class="nt">&lt; pageCount</span><span class="err">)</span><span class="nt">&gt;</span>
        <span class="err">&lt;</span>#assign endPage = (startPage + 4)&gt;
    <span class="err">&lt;</span>#else&gt;
        <span class="err">&lt;</span>#assign endPage = pageCount&gt;
    <span class="err">&lt;</span>/#if&gt;
<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;pages&quot;</span><span class="nt">&gt;</span>
<span class="err">&lt;</span>#--如果当前页大于第一页，输出上一页导航--&gt;
    <span class="err">&lt;</span>#if (curPage &gt; 1) &gt;
        <span class="err">&lt;</span>#assign prePage = curPage-1&gt;
        <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;/staff/queryStaffByOrg?orgId=${orgId!&#39;&#39;}&amp;pageNumber=${prePage}&quot;</span> <span class="na">class=</span><span class="s">&quot;prev&quot;</span>
           <span class="na">title=</span><span class="s">&quot;上一页&quot;</span><span class="nt">&gt;</span>上一页<span class="nt">&lt;/a&gt;</span>
    <span class="err">&lt;</span>/#if&gt;
<span class="err">&lt;</span>#--开始输出页码导航--&gt;
<span class="err">&lt;</span>#--
    如果开始页大于1 (表示当前页和2的差值大于1)
        先输出&quot;第一页的link&quot;和&quot;...&quot;
    否则跳过
        然后由遍历的过程输出第一页的链接
--&gt;
    <span class="err">&lt;</span>#if (startPage &gt; 1)&gt;
        <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;/staff/queryStaffByOrg?orgId=${orgId!&#39;&#39;}&amp;pageNumber=1&quot;</span> <span class="na">class=</span><span class="s">&quot;page-item item-number&quot;</span> <span class="na">title=</span><span class="s">&quot;1&quot;</span><span class="nt">&gt;</span>1<span class="nt">&lt;/a&gt;</span>
        <span class="err">&lt;</span>#if (startPage &gt; 2)&gt;
            <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;page-item item-ellipsis&quot;</span><span class="nt">&gt;</span>...<span class="nt">&lt;/span&gt;</span>
        <span class="err">&lt;</span>/#if&gt;
    <span class="err">&lt;</span>/#if&gt;
<span class="err">&lt;</span>#--
    遍历输出开始页到结束页的链接
        如果是当前页，页码没有链接并且有自己的样式
--&gt;
    <span class="err">&lt;</span>#if (startPage <span class="err">&lt;</span>= endPage)&gt;
        <span class="err">&lt;</span>#list startPage..endPage as page&gt;
            <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;/staff/queryStaffByOrg?orgId=${orgId!&#39;&#39;}&amp;pageNumber=${page}&quot;</span> <span class="na">class=</span><span class="s">&quot;page-item item-number&lt;#if curPage == page&gt; cursor&lt;/#if&gt;&quot;</span> <span class="na">title=</span><span class="s">&quot;${page}&quot;</span><span class="nt">&gt;</span>${page}<span class="nt">&lt;/a&gt;</span>
        <span class="err">&lt;</span>/#list&gt;
    <span class="err">&lt;</span>/#if&gt;
<span class="err">&lt;</span>#--
    如果endPage <span class="nt">&lt; pageCount</span>   <span class="err">(表示结束页是</span><span class="na">startPage</span> <span class="err">+</span> <span class="na">8</span><span class="err">，否则</span><span class="na">endPage =</span><span class="err"> </span><span class="s">pageCount)</span>
        <span class="na">1</span><span class="err">.先判断是否小于最后一页的前一页,如果是先输出&quot;...&quot;，否则跳过</span>
        <span class="na">2</span><span class="err">.单独输出最后一页</span>
    <span class="err">否则跳过</span>
        <span class="err">实质上在上面的遍历的过程中已经输出了最后一页的链接</span>
<span class="na">--</span><span class="nt">&gt;</span>
    <span class="err">&lt;</span>#if (endPage <span class="nt">&lt; pageCount</span><span class="err">)</span><span class="nt">&gt;</span>
        <span class="err">&lt;</span>#if (endPage <span class="nt">&lt; pageCount</span> <span class="na">-</span> <span class="na">1</span><span class="err">)</span><span class="nt">&gt;</span>
            <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;page-item item-ellipsis&quot;</span><span class="nt">&gt;</span>...<span class="nt">&lt;/span&gt;</span>
        <span class="err">&lt;</span>/#if&gt;
        <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;/staff/queryStaffByOrg?orgId=${orgId!&#39;&#39;}&amp;pageNumber=${pageCount}&quot;</span> <span class="na">class=</span><span class="s">&quot;page-item item-number&quot;</span> <span class="na">title=</span><span class="s">&quot;${pageCount}&quot;</span><span class="nt">&gt;</span>${pageCount}<span class="nt">&lt;/a&gt;</span>
    <span class="err">&lt;</span>/#if&gt;
<span class="err">&lt;</span>#--如果当前页小于总页数，输出下一页导航--&gt;
    <span class="err">&lt;</span>#if (curPage <span class="nt">&lt; pageCount</span><span class="err">)</span><span class="nt">&gt;</span>
        <span class="err">&lt;</span>#assign nextPage = curPage+1&gt;
        <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;/staff/queryStaffByOrg?orgId=${orgId!&#39;&#39;}&amp;pageNumber=${pageCount}&quot;</span> <span class="na">data-pg=</span><span class="s">&quot;${nextPage}&quot;</span> <span class="na">class=</span><span class="s">&quot;next&quot;</span>
           <span class="na">title=</span><span class="s">&quot;下一页&quot;</span><span class="nt">&gt;</span>下一页<span class="nt">&lt;/a&gt;</span>
    <span class="err">&lt;</span>/#if&gt;
<span class="err">&lt;</span>#--结束输出页码导航--&gt;
<span class="nt">&lt;/div&gt;</span>
<span class="err">&lt;</span>/#macro&gt;
</code></pre></div>
<p>就是说先根据与1和pageCount的比较来判断定下了一个startPage和endPage，这是决定中间的输出的，然后前面的<code>...</code>和后面的<code>...</code>这两个值是他们分别与1和pageCount来单独比较的，而<code>上一页和</code>下一页`是单独判断是否展示的。原来自己看了下分页，也就是这么简单的事情而已  (●&#39;◡&#39;●)ﾉ♥</p>

      <div id="disqus_thread"></div>
<script>
  (function() { // DON'T EDIT BELOW THIS LINE
  var d = document, s = d.createElement('script');
  s.src = '//panyifei.disqus.com/embed.js';
  s.setAttribute('data-timestamp', +new Date());
  (d.head || d.body).appendChild(s);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
<script id="dsq-count-scr" src="//panyifei.disqus.com/count.js" async></script>

      <!-- <footer class="site-footer">
  <span class="site-footer-owner"><a href="">前端技术</a> is maintained by <a href="https://github.com/panyifei">逸飞</a>.</span>
</footer> -->

<footer>
	<div class="span-inline">
		
			<span>
				<a target="_blank" href="https://github.com/panyifei">
					<span class="fa-stack fa-lg">
						<i class="fa fa-circle fa-stack-2x"></i>
						<i class="fa fa-github fa-stack-1x fa-inverse"></i>
					</span>
				</a>
			</span>
		
		
			<span>
				<a target="_blank" href="https://www.zhihu.com/people/pan-yi-fei-52">
					<span class="fa-stack fa-lg">
						<i class="fa fa-circle fa-stack-2x"></i>
						<i class="fa  fa-stack-1x fa-inverse">知</i>
					</span>
				</a>
			</span>
		
		
			<span>
				<a target="_blank" href="http://www.jianshu.com/users/3b9067fb7edf">
					<span class="fa-stack fa-lg">
						<i class="fa fa-circle fa-stack-2x"></i>
						<i class="fa  fa-stack-1x fa-inverse">简</i>
					</span>
				</a>
			</span>
		
	</div>
	<p class="copyright">
		Copyright &copy; 前端技术 2017
		<br>
		Owned by <a href="https://github.com/panyifei">潘逸飞</a>
	</p>
</footer>

    </section>
  </body>
</html>
