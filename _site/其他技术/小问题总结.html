<!DOCTYPE html>
<html lang="en-us">
  <head>
  <meta charset="UTF-8">
  <title>前端技术</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#157878">
  <link rel="stylesheet" href="/Front-end-learning/css/normalize.css">
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="/Front-end-learning/css/cayman.css">
  <link rel="stylesheet" href="/Front-end-learning/css/font-awesome.min.css">
  <link rel="stylesheet" href="/Front-end-learning/css/highlight.css">
</head>

  <body>
    <section class="page-header">
    <h1 class="project-name"><a href="/Front-end-learning/README">前端技术</a></h1>
    <h2 class="project-tagline">逸飞的前端打怪日常，主要是javascript</h2>
    <a href="https://github.com/panyifei/Front-end-learning" class="btn">View on GitHub</a>
    <a href="https://github.com/panyifei/Front-end-learning/archive/master.zip" class="btn">Download .zip</a>
</section>

    <section class="main-content">
      <h1>小问题总结</h1>

<h2>￥的unicode是怎么找到的</h2>

<p>直接<a href="http://unicode-table.com/en/">unicode-table</a></p>

<h2>input输入时，金额前加上实时<code>￥</code></h2>

<p>就是提前画好并隐藏。输入了数字时，拿到input的<code>font-size</code>和value，新建一份添加进页面，算好宽度后删掉。</p>

<p>这个时候得到了文本内容的宽度，就可以给<code>￥</code>元素添加上right属性来定位。</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;span&#39;</span><span class="p">).</span><span class="nx">css</span><span class="p">({</span>
    <span class="nx">right</span><span class="o">:</span> <span class="nx">dim</span><span class="p">.</span><span class="nx">inputTextSize</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">width</span>
<span class="p">}).</span><span class="nx">show</span><span class="p">();</span>
</code></pre></div>
<p>dim的代码：</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">$</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;zepto&#39;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">div</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;&lt;div&gt;&#39;</span><span class="p">);</span>
<span class="nx">div</span><span class="p">.</span><span class="nx">css</span><span class="p">({</span>
    <span class="nx">width</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">height</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">overflow</span><span class="o">:</span> <span class="s1">&#39;hidden&#39;</span><span class="p">,</span>
    <span class="nx">position</span><span class="o">:</span> <span class="s1">&#39;absolute&#39;</span><span class="p">,</span>
    <span class="nx">right</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">bottom</span><span class="o">:</span> <span class="mi">0</span>
<span class="p">});</span>
<span class="kd">var</span> <span class="nx">span</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;&lt;span&gt;&#39;</span><span class="p">);</span>
<span class="nx">span</span><span class="p">.</span><span class="nx">css</span><span class="p">({</span>
    <span class="nx">visibility</span><span class="o">:</span> <span class="s1">&#39;hidden&#39;</span>
<span class="p">});</span>
<span class="nx">div</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">span</span><span class="p">);</span>
<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">textSize</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">text</span><span class="p">,</span> <span class="nx">fontSize</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">fontSize</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">span</span><span class="p">.</span><span class="nx">css</span><span class="p">({</span>
                <span class="nx">fontSize</span><span class="o">:</span> <span class="nx">fontSize</span>
            <span class="p">});</span>
        <span class="p">}</span>
        <span class="nx">span</span><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">text</span><span class="p">);</span>
        <span class="nx">div</span><span class="p">.</span><span class="nx">appendTo</span><span class="p">(</span><span class="s1">&#39;body&#39;</span><span class="p">);</span>
        <span class="kd">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="p">{</span>
            <span class="nx">width</span><span class="o">:</span> <span class="nx">span</span><span class="p">.</span><span class="nx">width</span><span class="p">(),</span>
            <span class="nx">height</span><span class="o">:</span> <span class="nx">span</span><span class="p">.</span><span class="nx">height</span><span class="p">()</span>
        <span class="p">};</span>
        <span class="nx">div</span><span class="p">.</span><span class="nx">remove</span><span class="p">();</span>
        <span class="k">return</span> <span class="nx">result</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">inputTextSize</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">inputElement</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">input</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">inputElement</span><span class="p">);</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">textSize</span><span class="p">(</span><span class="nx">input</span><span class="p">.</span><span class="nx">val</span><span class="p">(),</span> <span class="nx">input</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;font-size&#39;</span><span class="p">));</span>
    <span class="p">}</span>
<span class="p">};</span>
</code></pre></div>
<h2>为什么DOMcontnetLoaded只能用addEventListener来绑定？</h2>

<p>有些事件，比如说click可以用<code>onclick</code>来绑定，但是<code>DOMcontnetLoaded</code>只能使用<code>addEventListener</code>来绑定</p>

<p>因为<code>DOMcontnetLoaded</code>是DOM2级才加入的事件</p>

<h2>手机号掩码的小问题</h2>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript">    <span class="k">if</span><span class="p">(</span><span class="nx">mobileNo</span><span class="p">.</span><span class="nx">length</span><span class="o">&gt;</span><span class="mi">10</span><span class="p">){</span>
         <span class="nx">mobileNo</span> <span class="o">=</span> <span class="nx">mobileNo</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="nx">mobileNo</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">),</span><span class="s2">&quot;****&quot;</span><span class="p">);</span>
    <span class="p">}</span>
</code></pre></div>
<p>这里12323231111就会出错，因为replace可能会从前面开始匹配</p>

<p>解决方法：</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript">    <span class="kd">var</span> <span class="nx">arr</span> <span class="o">=</span> <span class="nx">mobileNo</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">);</span>
    <span class="nx">arr</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="s1">&#39;****&#39;</span><span class="p">);</span>
    <span class="nx">arr</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">);</span>
</code></pre></div>
<h2>想在textarea里面友好的显示json</h2>

<p>想再textarea里面比较友好的显示json的，以为需要使用插件，结果JSON.stringify第三个参数已经可以搞定了，好吧~</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">prettyPrint</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">ugly</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;myTextArea&#39;</span><span class="p">).</span><span class="nx">value</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">ugly</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">pretty</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="kc">undefined</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;myTextArea&#39;</span><span class="p">).</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">pretty</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<h2>LTS版本是什么意思？</h2>

<p>LTS版本的意思就是long time support。意思是长期支持的版本，就可以理解为比较稳定的版本。</p>

<h2>开发的页面不想让用户可以选择</h2>
<div class="highlight"><pre><code class="language-css" data-lang="css"><span class="nt">user-select</span><span class="nd">:none</span><span class="o">;</span>
<span class="nt">-webkit-user-select</span><span class="nd">:none</span><span class="o">;</span>
</code></pre></div>
<p>这两个属性可以控制</p>

<h2>display:inline的元素不对齐</h2>

<p>display:inline的元素会因为手机浏览器的问题对齐不好，</p>

<p>这个问题的解决是设置为display:inline-block的，</p>

<p>然后vertical-align:top然后来将强制定位，这样子比较靠谱一点，基本都能够适配</p>

<h2>install的时候想看到发出的http请求的状态</h2>

<p>npm config set loglevel=http</p>

<p>这一句命令就可以搞定</p>

<h2>想要在命令行中打开webstorm或者sublime</h2>

<p>webstorm非常智能，直接到tools里面，create-command-line-lancher就行了。</p>

<p>sublime需要输入一条命令<code>sudo ln -s /Applications/Sublime\ Text.app/Contents/SharedSupport/bin/subl /usr/bin/subl</code>来提个权并且加个软链接</p>

<h2>underscore的throttle和debounce</h2>

<p>都是用来控制那种密集触发方法的。是两种不同的处理策略。</p>

<ul>
<li>throttle是控制多长时间之内只能执行一次，比如scroll不停地在触发，极其消耗性能，给了250ms的延迟，会不断的执行。有最小时间间隔。</li>
<li>debounce是某个状态多少毫秒才会进行执行，比如用户输入了，停顿了多久了才会发送一次ajax请求。</li>
</ul>

<h2>iframe相互操作必须遵守同源</h2>

<p>ifram父元素和子元素之间想要相互调用的话，必须遵守同源策略！！</p>

<p>在beta环境的子页面中调本地的父页面的的一个全局的方法的时候访问window.parent页面崩溃了，因为没有遵守同源</p>

<h2>iframe让子页面的高度自适应的做法</h2>

<p>现在父页面中申明一个改变的方法
<code>javascript
window.changeFrameHeight = function (ext) {
            //改变iframe的高度
            var height = 0;
            for (var i in ext) {
                height += ext[i];
            }
            $(&quot;#payFrame&quot;).attr(&quot;height&quot;, height); //设置iframe的高度
        };
</code></p>

<p>然后再每个改变的地方调用父页面的这个方法，注意父子页面必须是同源的！！！</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="k">try</span> <span class="p">{</span>
    <span class="nb">window</span><span class="p">.</span><span class="nx">parent</span><span class="p">.</span><span class="nx">changeFrameHeight</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{}</span>
</code></pre></div>
<h3>padding的妙用</h3>

<p>padding的百分比都是继承width的，不会去找高度的百分比！！</p>

<p>这个还是有点实用的定位技巧</p>

<h3>图片压缩</h3>

<p><a href="https://tinypng.com/">tinypng</a>这个网站提供很出色的图片压缩~~</p>

<h3>遇到一个页面撑不开的bug</h3>

<p>页面太小，没有撑开页面，而且又不是fixed的，而是absolute的布局，想要让他自动的撑开，又要跟在文档流的底部，光靠css是不行的。因为要么在文档流里，要么不在，只能有一个选择。</p>

<h3>在js中给页面上的form设置method和target好像是无效的，而iframe在js上动态设置却是可以的</h3>

<h3>Function.prototype.call.bind</h3>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">call</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">forEach</span><span class="p">)(</span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s1">&#39;.klasses&#39;</span><span class="p">),</span><span class="kd">function</span><span class="p">(</span><span class="nx">el</span><span class="p">){</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">el</span><span class="p">);</span>
<span class="p">})</span>
<span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">call</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">forEach</span><span class="p">,</span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s1">&#39;.klasses&#39;</span><span class="p">),</span><span class="kd">function</span><span class="p">(</span><span class="nx">el</span><span class="p">){</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">el</span><span class="p">);</span>
<span class="p">})</span>
<span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">forEach</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s1">&#39;.klasses&#39;</span><span class="p">),</span><span class="kd">function</span><span class="p">(</span><span class="nx">el</span><span class="p">){</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">el</span><span class="p">);</span>
<span class="p">})</span>
<span class="c1">//上面的3个是慢慢转化的</span>
<span class="c1">//结果就像是下面的</span>
<span class="kd">var</span>  <span class="nx">forEach</span> <span class="o">=</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">call</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">forEach</span><span class="p">);</span>
<span class="kd">var</span>  <span class="nx">forEach</span> <span class="o">=</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">forEach</span><span class="p">.</span><span class="nx">call</span><span class="p">;</span>
<span class="c1">//但是这里看样子是对的，但是其实执行的话是不对的，因为直接执行的时候，call里面的this是windows</span>
<span class="c1">//所以说上面那么绕其实就是想将call方法bind到foreach上面，这里之所以想这样是因为想要让这个arrayLike的数组也使用这个东西</span>
<span class="c1">//最好的方法是直接[].slice.call(document.querySelectorAll(&#39;.klasses&#39;))，然后再调用foreach</span>
</code></pre></div>
<h3>针对发送的post请求的编码问题</h3>

<p>这个问题如果传的是中文的话，后端拿到的可能是乱码，可以通过前端在contentType里面设置一下<code>application/x-www-form-urlencoded; charset=UTF-8</code></p>

<p>但是因为ajax这种基础库肯定是要包装一下的，从组件的角度看不适合把contentType写死，也许可以给个编辑的入口，但是这样还不如让后端的拦截器来做这个功能，这样前端就不用管了，而且后端肯定来处理这个更适合些的。</p>

<h3>离开页面是进行弹窗判断</h3>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nb">window</span><span class="p">.</span><span class="nx">onbeforeunload</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="s2">&quot;您还有东西未保存，确定要离开页面吗？&quot;</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div>
<h3>为什么CSS没有选择上一个同级元素的选择器</h3>

<p>因为页面的渲染一般是拿到多少，渲染多少，所以后面的元素一般是根据前面的元素的属性进行渲染，如果后面的元素的渲染影响到了前面的元素的话，那么就会造成<code>回溯</code>，就可能会导致整个页面的重绘，非常影响性能。可以参见知乎的<a href="https://www.zhihu.com/question/21508830#">一篇文章</a>。</p>

<p>如果强行想选择前一个元素，要么前后位置对调，使用float:right，然后用相邻选择器来模拟，或者使用flex的flex-direction:column-reverse来从下往上布局，不过这样的话，html的元素就是反过来的了。或者就得用js来做了。</p>

<h3>页面重构的一些使用心得</h3>

<ul>
<li><p>css的性能很重要，尽力减少层级关系</p></li>
<li><p>所有的基本写法一定要写在最下面，遵循由旧到新、由不标准到标准的顺序。</p></li>
<li><p>渐变颜色比较多的图片最好使用jpeg来存储，那种颜色单一的只需要存png</p></li>
<li><p>font基本上设置在全局的，尽量设置在body上</p></li>
</ul>

<h3>长度超长，又不想有滚动条</h3>

<p>设置父级元素overflow:hidden</p>

<h3>图片的浏览器兼容性问题</h3>

<p>background-size在IE下的支持性不好，可以用img替代，或者用PS先压缩到需要的长宽。</p>

<p>一般定位我们除了px，还可以用background-position来做，就设置right center，就可以右对齐，垂直居中了。</p>

<h3>做设计</h3>

<p>尽量单线影响，不要既让服务器渲染又让客户端渲染，尽量单项的流程，不要同时去影响两个地方。</p>

<h3>data-URIs</h3>

<p>就是允许将小文件进行编码后嵌入到另一个文件。这样css里面里面可以直接写入这个小图片的所有信息，就不需要再发送一个http请求了。</p>

<ul>
<li> 格式:<code>data:[&lt;mediatype&gt;][;base64],&lt;data&gt;</code>(mediatype就是数据的类型，比如&quot;image/jpeg&quot;，然后base64申明是这种编码的，然后data里面就是具体的数据了。)</li>
<li>转化
其实可以随意找个网站转化或者直接linux下敲命令<code>uuencode -m infile remotename</code>,命令得到的就是我们需要的数据了。</li>
<li> 兼容性(IE8之后支持css里面使用data uri的形式)</li>
</ul>

<h3>.gitignore</h3>

<p>因为构建工具的原因，本地的css不想推上去，但是css里面的img文件夹希望推上去。于是.gitignore里面可以这么写css/*<em>/</em>.css，这样子所有的css文件就都会被忽略了，我们加了gitignore之后，git status还是会显示，是因为缓存的原因，我们可以<code>git rm -r --cashd .</code>这样清掉缓存就好了。</p>

<h3>美团点评之间的专线</h3>

<p>其实就是一条物理线路，用来把环境变成内网，这样调用的时候就不会走公网的环境，就不会有劫持啊之类的，而且也不用加密，整个的访问速度为30ms。</p>

<h3>Cookie</h3>

<p>Cookie主要是为了弥补HTTP是个无状态请求的问题，这个主要是为了告诉服务器是谁在请求。服务器如果一般就是把cookie的内容存下来，维持一段会话，这就变成了session。也可以把认证的过程交给其他的服务来做，这就是生成了一段token。</p>

<p>客户端第一次请求的时候啥都没有，服务器生成一段cookie，然后通知客户端存一下cookie。接下来的请求带上cookie，服务器就会知道是谁在请求。</p>

<h3>FastClick绑定的bug</h3>

<p>对于radio，select等等，fastclick有bug。得手动绑上needsclick类来让fastclick忽视掉他们。</p>

<h3>点评的www.dianping.com是怎么跳转到m.dianping.com的</h3>

<p>看上去是js跳转的，从initiator上看到请求是从www.dianping.com跳转的</p>

<h3>emitter</h3>

<p>明明知道emitter是使用一个数组来保存注册的事件的，然而拆代码到一个新的文件的时候还是选择了新建一个emitter导致了emitter的失效，下次写代码还是不能想当然</p>

<h3>react+redux什么时候connect？</h3>

<p>本来自己写的时候是感觉每个组件都可以connect，这样每个组件都拥有全局的数据，很方便操作。比如点击一个组件内部的按钮，页面弹了一个弹层。我就给这个组件connect了store。但是这里其实弹层是页面的行为，不是发生在组件内的，我应该把这件事情交给页面来做，这样才能避免组件对页面其他数据的影响。即使自己不会去影响，也得让后面的人没法影响。</p>

<p>这里应该把弹窗这个事情交给外面的页面来做，下次写的时候要考虑下到底是谁的行为。</p>

<h3>node差量更新</h3>

<p>为一个新作的app重新建立缓存机制，在静态资源包想要做一次二进制的比对，传差量包。</p>

<p>选择使用bsdiff算法。npm上找到node-bsdiff模块，直接安装的话，根本不走编译，所以使用淘宝的cnpm安装。</p>

<p>结果gcc编译出了问题，说是gcc10.5未找到。于是参考https://github.com/nodejs/node/issues/2933，运行以下的命令解决了。</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">    cd /usr/local/lib
    sudo ln -s ../../lib/libSystem.B.dylib libgcc_s.10.5.dylib
</code></pre></div>
<p>使用这个模块可以得到两个模块的差值包。</p>

<h3>npm一直publish不了</h3>

<p>可能是本地的配置与全局的配置冲突，运行<code>npm config ls -l|grep config</code>得到地址，然后去制定的地址删掉，然后就可以npm addUser，npm publish了。</p>

<h3>学到了一个小的技巧</h3>

<p>很多时候我们需要根据一个布尔值来removeClass和addClass，可以用中括号的方法来写，由此而酷炫的。</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript">    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;body&#39;</span><span class="p">)[</span><span class="nx">bool</span><span class="o">?</span><span class="s1">&#39;removeClass&#39;</span><span class="o">:</span><span class="s1">&#39;addClass&#39;</span><span class="p">](</span><span class="s1">&#39;hide&#39;</span><span class="p">);</span>
</code></pre></div>
<h3>幽灵空白</h3>

<p>就是块状元素内部如果有inline元素，里面还会有个幽灵元素。这个幽灵元素继承父层块状元素的line-height和font-size，他的对齐是与其他inline元素的尾部的baseline对齐，所以就会导致高度会有撑出。这个时候的解决办法有设置vertical-align为top或者设置让父级块状元素的line-height和font-size为0。</p>

<h3>去除chrome的默认border-radious</h3>
<div class="highlight"><pre><code class="language-css" data-lang="css"><span class="nc">.select</span><span class="p">{</span>
    <span class="k">border</span><span class="o">:</span> <span class="m">0px</span><span class="p">;</span>
    <span class="k">outline</span><span class="o">:</span> <span class="m">1px</span> <span class="k">solid</span> <span class="k">rgb</span><span class="p">(</span><span class="m">204</span><span class="o">,</span><span class="m">204</span><span class="o">,</span><span class="m">204</span><span class="p">);</span>    
<span class="p">}</span>
</code></pre></div>
<h3>函数式编程</h3>

<p>要求使用函数，把运算的过程都定义为函数。</p>

<p>5个特点：</p>

<ul>
<li>函数是第一等公民</li>
<li>只用表达式(单纯的运算，都有返回值)</li>
<li>没有副作用</li>
<li>不修改状态</li>
<li>引用透明，就是不依赖外部变量或者状态，只依赖输入的参数，参数相同，返回值就是相同的</li>
<li>尾递归优化(每次递归都会重用stack)</li>
</ul>

<p>函数式编程的好处：</p>

<ul>
<li>代码简洁，因为全是函数</li>
<li>接近自然语言</li>
<li>方便代码管理(因为是独立单元，同样的输入同样结果，利于单元测试)</li>
<li>易于并发编程(不修改变量，所以工作可以分摊到多个线程)</li>
</ul>

<p>几个技术：</p>

<ul>
<li>柯里化</li>
<li>递归</li>
<li>map/reduce</li>
<li>高阶函数(就是把函数当做参数，传来传去的)</li>
</ul>

<p>以上其实都不算是函数式编程，看看schema，然后学个haskshell。然后差不多能理解了。</p>

<h3>webassembly</h3>

<p>其实就是web层的汇编器，就是说有可能会出现一种新语言，或者说直接一种高级语言来支持编译到这个汇编器。</p>

<h3><code>--depth</code></h3>

<p>这个参数表示告诉git只拉最新的16次commit。用于git clone。</p>

<h3>同构</h3>

<p>同构其实主要是前后端运行一套代码，后端提前进行页面的渲染。但是要在后端加一层node层。后端用node写的话，前端其实是没有这个能力的，因为整个的思维方式需要改变。如果让java层调用node的服务。因为目前公司都是java7。java7自带的js运行器性能太差。等到升级到java8之后再看这个问题。</p>

<h3>命令行输出没有颜色</h3>

<p>首先，命令行输出的颜色是标记式语言，webpack的输出有颜色肯定是使用了那些标记。而热部署的时候没有颜色肯定是他把标记去掉了，至于为什么要去掉，可能是考虑到会输出到文件，然后去掉了标记。</p>

<h3>react的this.props和nextProps一直是一样的</h3>

<p>就是父组件内部的state是一个超过两层的对象，然后子组件调用父类的方法改了这个state。然后父组件把state传给了子组件作为props。就会导致子组件的this.props和nextProps的结果是一样的。因为他们指向了同一个引用。这个引用的对象被父组件修改过了。</p>

<p>这个bug遇到了感觉疯了啊~~~</p>

<h3>在编写webpack插件的时候如何debug</h3>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;path&#39;</span><span class="p">);</span>
<span class="nx">require</span><span class="p">(</span><span class="s1">&#39;child_process&#39;</span><span class="p">).</span><span class="nx">exec</span><span class="p">(</span><span class="s2">&quot;npm config get prefix&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">stdout</span><span class="p">,</span> <span class="nx">stderr</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">nixLib</span> <span class="o">=</span> <span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">platform</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s2">&quot;win&quot;</span><span class="p">)</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="o">?</span> <span class="s2">&quot;&quot;</span> <span class="o">:</span> <span class="s2">&quot;lib&quot;</span><span class="p">;</span> <span class="c1">// win/*nix support</span>
    <span class="kd">var</span> <span class="nx">webpackPath</span> <span class="o">=</span> <span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">stdout</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s2">&quot;\n&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span> <span class="nx">nixLib</span><span class="p">,</span> <span class="s1">&#39;node_modules&#39;</span><span class="p">,</span> <span class="s1">&#39;webpack&#39;</span><span class="p">,</span> <span class="s1">&#39;bin&#39;</span><span class="p">,</span> <span class="s1">&#39;webpack.js&#39;</span><span class="p">));</span>
    <span class="nx">require</span><span class="p">(</span><span class="nx">webpackPath</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<p>其实并不用这么来，只要保证这个命令式webstorm运行的就行了。只需要配置debug的运行脚本为<code>node_modules/.bin/webpack</code>就行了。</p>

<h3>子域名的cookie没法共享</h3>

<p>后端设置cookie的时候没有设置好domain。默认写在了全部的domain之下，这样切换子域的时候，cookie就不能互相共享了。重要的一些cookie还是设置在主域名下比较好。</p>

<h3>URI和URL</h3>

<p>URI是统一资源标识符，URL是统一资源定位符，两者都能唯一确定描述一个资源，但是URL还拥有这定位这个资源的能力，URL是URI的一个子集。就这么理解就够了。</p>

<h3>CSS预处理器与CSS Mixin</h3>

<p>CSS预处理器其实就是因为CSS没有相应的能力，比如不是HTML那种嵌套的结构，期望写起来是层次结构；希望分模块的，就有了import；期望能有变量，这样方便统一管理；期望能有可重用的代码块等等。</p>

<p>Mixin有点像C语言的宏，是可重用的代码块。好处是可以传入变量值，也可以设置缺省的值。</p>

      <div id="disqus_thread"></div>
<script>
  (function() { // DON'T EDIT BELOW THIS LINE
  var d = document, s = d.createElement('script');
  s.src = '//panyifei.disqus.com/embed.js';
  s.setAttribute('data-timestamp', +new Date());
  (d.head || d.body).appendChild(s);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
<script id="dsq-count-scr" src="//panyifei.disqus.com/count.js" async></script>

      <!-- <footer class="site-footer">
  <span class="site-footer-owner"><a href="">前端技术</a> is maintained by <a href="https://github.com/panyifei">逸飞</a>.</span>
</footer> -->

<footer>
	<div class="span-inline">
		
			<span>
				<a target="_blank" href="https://github.com/panyifei">
					<span class="fa-stack fa-lg">
						<i class="fa fa-circle fa-stack-2x"></i>
						<i class="fa fa-github fa-stack-1x fa-inverse"></i>
					</span>
				</a>
			</span>
		
		
			<span>
				<a target="_blank" href="https://www.zhihu.com/people/pan-yi-fei-52">
					<span class="fa-stack fa-lg">
						<i class="fa fa-circle fa-stack-2x"></i>
						<i class="fa  fa-stack-1x fa-inverse">知</i>
					</span>
				</a>
			</span>
		
		
			<span>
				<a target="_blank" href="http://www.jianshu.com/users/3b9067fb7edf">
					<span class="fa-stack fa-lg">
						<i class="fa fa-circle fa-stack-2x"></i>
						<i class="fa  fa-stack-1x fa-inverse">简</i>
					</span>
				</a>
			</span>
		
	</div>
	<p class="copyright">
		Copyright &copy; 前端技术 2017
		<br>
		Owned by <a href="https://github.com/panyifei">潘逸飞</a>
	</p>
</footer>

    </section>
  </body>
</html>
