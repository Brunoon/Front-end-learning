<!DOCTYPE html>
<html lang="en-us">
  <head>
  <meta charset="UTF-8">
  <title>前端技术</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#157878">
  <link rel="stylesheet" href="/Front-end-learning/css/normalize.css">
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="/Front-end-learning/css/cayman.css">
  <link rel="stylesheet" href="/Front-end-learning/css/font-awesome.min.css">
  <link rel="stylesheet" href="/Front-end-learning/css/highlight.css">
</head>

  <body>
    <section class="page-header">
    <h1 class="project-name"><a href="/Front-end-learning/README">前端技术</a></h1>
    <h2 class="project-tagline">逸飞的前端打怪日常，主要是javascript</h2>
    <a href="https://github.com/panyifei/Front-end-learning" class="btn">View on GitHub</a>
    <a href="https://github.com/panyifei/Front-end-learning/archive/master.zip" class="btn">Download .zip</a>
</section>

    <section class="main-content">
      <h1>3章HTTP报文</h1>

<p>用于HTTP协议交互的信息称为HTTP报文。请求端的叫做请求报文。响应端的叫做响应报文。HTTP报文本身是由多行数据构成的字符串文本。</p>

<p>大致可以分为报文首部和报文主体两块，由最初的空行来划分。通常不一定有报文主体。</p>

<h2>请求与响应报文的结构</h2>

<p>请求报文：</p>

<ul>
<li>请求行：包含用于请求的方法，请求URI和HTTP版本</li>
<li>请求首部字段</li>
<li>通用首部字段</li>
<li>实体首部字段</li>
<li>其他（可能包含HTTP的RFC里的未定义首部，比如cookie）</li>
<li>空行</li>
<li>报文主体</li>
</ul>

<p>响应报文：</p>

<ul>
<li>状态行：包含表明响应结果的状态码，原因短语和HTTP版本</li>
<li>响应首部字段</li>
<li>通用首部字段</li>
<li>实体首部字段</li>
<li>其他</li>
<li>空行</li>
<li>报文主体</li>
</ul>

<p>注：cookie并不是在HTTP的RFC里的，他是IETF的另一个规范HTTP状态规范里的。不过也没必要深究，都是规范就是了。</p>

<h2>编码提升传输效率</h2>

<p>就是讲内容进行压缩后再传给客户端，用户端再进行解码，内容编码有以下几种：Gzip，compress，deflate，identity</p>

<h2>分块传输编码</h2>

<p>就是将实体主体分为多个部分，每一块都用16进制来标记大小。</p>

<h2>发送多种数据的多部分对象集合</h2>

<p>比如邮件采用了MIME，于是我们可以添加文本，图片，视频等多种不同类型的数据。</p>

<p>HTTP协议里面也采纳了多部分对象集合。</p>

<ul>
<li>multipart/form-data：web表单文件上传时使用</li>
<li>multipart/byteranges：报文包含多个范围的内容时使用，每个部分都可以有自己的头部</li>
</ul>

<h2>获取部分内容的范围请求</h2>

<p>下载过程中如果出现了中断，就需要恢复的机制，就是从之前中断处恢复下载。</p>

<p>就是指定范围发送的请求。</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">Range: bytes=-3000,5000-10000
</code></pre></div>
<p>还可以发送多个范围的请求</p>

<p>范围请求如果支持的话，会返回206的结果好报文，如果是多范围的话，那就是multipart/byteranges的结果。如果不支持的话，那就是状态码200和完整的实体内容。</p>

<p>这个功能得是后端支持的，目前在前端界还没有使用过，因为前端也没有下载大量数据的需求</p>

<h2>内容协商返回最合适的内容</h2>

<p>服务器来根据内容返回，或者客户端自动根据UA来跳转，或者服务器和客户端各自进行内容协商的方法。</p>

      <div id="disqus_thread"></div>
<script>
  (function() { // DON'T EDIT BELOW THIS LINE
  var d = document, s = d.createElement('script');
  s.src = '//panyifei.disqus.com/embed.js';
  s.setAttribute('data-timestamp', +new Date());
  (d.head || d.body).appendChild(s);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
<script id="dsq-count-scr" src="//panyifei.disqus.com/count.js" async></script>

      <!-- <footer class="site-footer">
  <span class="site-footer-owner"><a href="">前端技术</a> is maintained by <a href="https://github.com/panyifei">逸飞</a>.</span>
</footer> -->

<footer>
	<div class="span-inline">
		
			<span>
				<a target="_blank" href="https://github.com/panyifei">
					<span class="fa-stack fa-lg">
						<i class="fa fa-circle fa-stack-2x"></i>
						<i class="fa fa-github fa-stack-1x fa-inverse"></i>
					</span>
				</a>
			</span>
		
		
			<span>
				<a target="_blank" href="https://www.zhihu.com/people/pan-yi-fei-52">
					<span class="fa-stack fa-lg">
						<i class="fa fa-circle fa-stack-2x"></i>
						<i class="fa  fa-stack-1x fa-inverse">知</i>
					</span>
				</a>
			</span>
		
		
			<span>
				<a target="_blank" href="http://www.jianshu.com/users/3b9067fb7edf">
					<span class="fa-stack fa-lg">
						<i class="fa fa-circle fa-stack-2x"></i>
						<i class="fa  fa-stack-1x fa-inverse">简</i>
					</span>
				</a>
			</span>
		
	</div>
	<p class="copyright">
		Copyright &copy; 前端技术 2017
		<br>
		Owned by <a href="https://github.com/panyifei">潘逸飞</a>
	</p>
</footer>

    </section>
  </body>
</html>
