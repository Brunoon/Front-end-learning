# 移动开发相关
### 页面从缓存中拿`onpageshow`
后退键在安卓和ios上的表现不同，安卓的后退键会默认地把页面刷新一次。然而ios则会从页面的cache中拿取页面，而不会再次执行js代码，导致了一些问题。解决办法是通过给window绑定`onpageshow`，然后判断`event.persisted`，如果是从缓存中拿取的，就location.reload一下，就会重新执行一下页面的js了。

```javascript
	window.onpageshow = function(event) {
        if (event.persisted) {
           location.reload();
        }
    };
```

### 锁住整个页面不让滑动
讲道理的话，给`body`一个`overflow:hidden`就行了

```css
.fix-scroll{
    position: absolute;
    width: 100%;
    height:100%;
    overflow:hidden; 
}
```

但是移动浏览器安卓2.3对于锁住滑动支持的不好

所以完美的解决在于，`body`和`html`都加上上述的类就行了


### 移动端不用`placeholder`
placeholder本身浏览器的支持还是不错的，但是如果想控制placeholder的属性，`::-webkit-input-placeholder`支持的就不好了

于是使用替代的data-placeholder

然后在div中添加以下代码

```css
    &::after {
        content: attr(data-placeholder);
        display: block;
        position: absolute;
        top: 50%;
        right: 10px;
        .transform(translateY(-50%));
        white-space: nowrap;
        font-size: 15px;
        color: @color-text-grey;
        z-index: -1;
    }
    &.has-value::after {
        display: none;
    }
```

通过切换has-value就可以切换展示与否了

### 安卓2.3不支持react,使用`ES5-shim`
因为安卓2.3对于es5的属性不能完全的支持，而react里面用到了bind，freeze等等es5才支持的属性，所以直接使用，会挂。

直接在页面上引入了`es5-shim.js` 和 `es5-shim.min.js`这两个js就搞定了。[代码地址](https://github.com/es-shims/es5-shim/)

功能是让那些对es5支持的不好的浏览器可以使用es5的特性。

### 安卓2.3对于空格符的支持
必须得写成`&nbsp;`，如果不加分号安卓2.3会不识别，其他都识别的

### 安卓2.3在input获得焦点的时候会有黄色边框
加上这个属性就可以搞定了

```css
input:focus{
      -webkit-tap-highlight-color:rgba(0,0,0,0);
    }

```

### genomotion小bug
测试轮询ajax刷新状态的，结果genomotion的模拟器居然同样的请求不重新请求，导致一直是失败的状态，坑爹的模拟器

### ios隐身模式下禁用localstorage
处理localstorage的地方用try catch包裹住，防止js报错从而卡住了页面

### display:flex的注意点
这个很神奇，让元素拥有自动扩展和收缩的能力，非常好用，注意里面的子元素都必须是block的，否则android下面会有问题

### align-items:center
这个属性是与display:flex配合使用的，是用来垂直方向上的居中对齐的

## ios input自带的border-radius和阴影背景
这样可以去掉

```css
border-radius: 0px;
-webkit-appearance:none;
```



todo：align-items